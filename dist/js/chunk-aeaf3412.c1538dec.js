(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aeaf3412"],{"9ed6":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("van-nav-bar",{attrs:{title:"登录","right-text":"注册","left-arrow":""},on:{"click-left":e.onClickLeft,"click-right":e.onClickRight}}),r("div",{staticClass:"content"},[r("van-cell-group",[r("van-field",{attrs:{required:"",clearable:"",label:"手机号","right-icon":e.usernameIcon,placeholder:"请输入手机号","error-message":e.usernameState},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("van-field",{attrs:{type:"password",label:"密码",clearable:"",placeholder:"请输入密码","right-icon":e.passwordIcon,"error-message":e.passwordState,required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("van-button",{attrs:{type:"primary",size:"normal",block:!0},on:{click:e.login}},[e._v("登录")])],1)],1)},a=[],s=(r("a481"),r("e17f"),r("2241")),i=(r("e7e5"),r("d399")),o=(r("66b9"),r("b650")),c=(r("c194"),r("7744")),u=(r("0653"),r("34e9")),l=(r("be7f"),r("565f")),d=(r("5246"),r("6b41")),h=r("2b0e");h["a"].use(d["a"]),h["a"].use(l["a"]),h["a"].use(c["a"]).use(u["a"]),h["a"].use(o["a"]),h["a"].use(i["a"]),h["a"].use(s["a"]);var f={data:function(){return{username:"",password:""}},computed:{usernameState:function(){return""===this.username?"":/^1[3456789]\d{9}$/.test(this.username)?"":"手机号码格式错误"},usernameIcon:function(){return""===this.username?"":/^1[3456789]\d{9}$/.test(this.username)?"checked":""},passwordState:function(){return""===this.password?"":this.password.length<5?"密码格式错误":""},passwordIcon:function(){return""===this.password?"":this.password.length>=5?"checked":""}},methods:{onClickLeft:function(){this.$router.back()},onClickRight:function(){this.$router.replace("/register")},login:function(){var e=this;return"checked"!==this.usernameIcon?(Object(i["a"])("手机号格式错误"),null):"checked"!==this.passwordIcon?(Object(i["a"])("密码格式错误"),null):this.sms!==this.code?(Object(i["a"])("验证码错误"),null):void fetch("http://47.100.225.183:8090/users/login",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username="+this.username+"&password="+this.password}).then(function(e){return e.json()}).then(function(t){1===t?(console.log("tel:"+e.username),Object(i["a"])("登录成功"),fetch("http://47.100.225.183:8090/users/gettel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tel:e.username})}).then(function(e){return e.json()}).then(function(t){e.$store.commit("changeLoginState","ok"),e.$store.commit("saveTel",t.data[0].tel),e.$store.commit("saveId",t.data[0]._id),e.$router.push("/user")})):2===t?s["a"].confirm({title:"提示",message:"该用户还未注册，是否注册"}).then(function(){e.$router.push("/register")}).catch(function(){}):-1===t?Object(i["a"])("密码错误"):Object(i["a"])("登录失败")})}}},p=f,v=r("2877"),m=Object(v["a"])(p,n,a,!1,null,null,null);t["default"]=m.exports},a481:function(e,t,r){"use strict";var n=r("cb7c"),a=r("4bf8"),s=r("9def"),i=r("4588"),o=r("0390"),c=r("5f1b"),u=Math.max,l=Math.min,d=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,p=function(e){return void 0===e?e:String(e)};r("214f")("replace",2,function(e,t,r,v){return[function(n,a){var s=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,s,a):r.call(String(s),n,a)},function(e,t){var a=v(r,e,this,t);if(a.done)return a.value;var d=n(e),h=String(this),f="function"===typeof t;f||(t=String(t));var g=d.global;if(g){var b=d.unicode;d.lastIndex=0}var w=[];while(1){var k=c(d,h);if(null===k)break;if(w.push(k),!g)break;var $=String(k[0]);""===$&&(d.lastIndex=o(h,s(d.lastIndex),b))}for(var S="",j=0,x=0;x<w.length;x++){k=w[x];for(var y=String(k[0]),I=u(l(i(k.index),h.length),0),O=[],C=1;C<k.length;C++)O.push(p(k[C]));var T=k.groups;if(f){var _=[y].concat(O,I,h);void 0!==T&&_.push(T);var A=String(t.apply(void 0,_))}else A=m(y,h,I,O,T,t);I>=j&&(S+=h.slice(j,I)+A,j=I+y.length)}return S+h.slice(j)}];function m(e,t,n,s,i,o){var c=n+e.length,u=s.length,l=f;return void 0!==i&&(i=a(i),l=h),r.call(o,l,function(r,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(c);case"<":o=i[a.slice(1,-1)];break;default:var l=+a;if(0===l)return r;if(l>u){var h=d(l/10);return 0===h?r:h<=u?void 0===s[h-1]?a.charAt(1):s[h-1]+a.charAt(1):r}o=s[l-1]}return void 0===o?"":o})}})}}]);
//# sourceMappingURL=chunk-aeaf3412.c1538dec.js.map